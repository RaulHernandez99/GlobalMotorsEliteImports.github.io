(()=>{var e={5801:e=>{e.exports.formatPhoneNumber=function(e,t){if(e.value){var n=e.value.replace(/\D/g,"").match(/(\d{0,3})(\d{0,3})(\d{0,4})/);e.value=n[2]?"("+n[1]+") "+n[2]+(n[3]?"-"+n[3]:""):n[1],t.value="+1"+e.value.replace(/\D/g,"")}else t.value=""}}},t={};function n(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,a,i,s,o=[],d=!0,l=!1;try{if(i=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;d=!1}else for(;!(d=(r=i.call(n)).done)&&(o.push(r.value),o.length!==t);d=!0);}catch(e){l=!0,a=e}finally{try{if(!d&&null!=n.return&&(s=n.return(),Object(s)!==s))return}finally{if(l)throw a}}return o}}(e,t)||function(e,t){if(e){if("string"==typeof e)return r(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?r(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function r(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}var a=function n(r){var a=t[r];if(void 0!==a)return a.exports;var i=t[r]={exports:{}};return e[r](i,i.exports,n),i.exports}(5801);window.addEventListener("load",(function(){var e=document.getElementsByName("csrf-token")[0].getAttribute("content"),t=Stripe(stripePublicKey),r=t.elements().create("card",{hidePostalCode:!0,style:{base:{fontWeight:"400",fontSize:"16px",color:"#3e475a"}}});r.mount("#su-cc-number-container");var i,s,o,d=document.getElementById("su-bidder"),l=document.getElementById("signup-form"),u=l.querySelector("button[type=submit]"),c=l.elements,p=document.getElementById("su-phone-formatted"),m=document.getElementById("su-phone");p.addEventListener("input",(function(e){a.formatPhoneNumber(p,m)})),l.addEventListener("submit",(function(t){var n;(t.preventDefault(),d.checked)?c.phone_formatted.checkValidity()&&(i?s?g():h(i):(n=new XMLHttpRequest,v(),n.addEventListener("load",(function(e){if(200===parseInt(e.target.status)){var t=JSON.parse(e.target.response);o=t.customer_id,h(i=t.client_secret)}else y()})),n.open("POST",l.dataset.setupPaymentMethodAction),n.setRequestHeader("accept","application/json"),n.setRequestHeader("X-Requested-With","XMLHttpRequest"),n.setRequestHeader("X-CSRF-TOKEN",e),n.send())):g()}));var f=document.getElementById("bidder-fields");function v(){u.disabled=!0,u.querySelector(".title").innerHTML="Submitting, please wait...",u.querySelector(".spinner").classList.remove("visually-hidden")}function y(){u.disabled=!1,u.querySelector(".title").innerHTML="Sign up",u.querySelector(".spinner").classList.add("visually-hidden")}function h(e){var n=document.getElementById("su-cc-name"),a=document.getElementById("su-cc-number-container");a.classList.remove("is-invalid"),a.classList.add("is-valid"),v(),t.confirmCardSetup(e,{payment_method:{card:r,billing_details:{name:n.value,phone:c.phone.value}}}).then((function(e){e.error?(y(),a.closest(".input-container").getElementsByClassName("invalid-feedback")[0].innerHTML="Can't add payment method",a.classList.remove("is-valid"),a.classList.add("is-invalid")):(s=e.setupIntent.payment_method,r.update({disabled:!0}),n.disabled=!0,c.phone_formatted.disabled=!0,d.disabled=!0,g())}))}function g(){grecaptcha.ready((function(){grecaptcha.execute(googleRecaptchaV3SiteKey,{action:"register"}).then((function(e){var t,r;c.google_recaptcha_v3_response.value=e,t=new XMLHttpRequest,r=new FormData(l),o&&r.append("payment_customer_id",o),s&&r.append("payment_method_id",s),r.append("phone",c.phone.value),v(),t.addEventListener("load",(function(e){c.forEach((function(e){void 0!==e.classList&&(e.classList.remove("is-invalid"),e.classList.add("is-valid"))})),l.getElementsByClassName("invalid-feedback").forEach((function(e){e.innerHTML=""}));var t=parseInt(e.target.status);if(422===t){y();var r=JSON.parse(e.target.response);if(void 0!==r.errors)for(var a=0,i=Object.entries(r.errors);a<i.length;a++){var s=n(i[a],2),o=s[0],d=s[1];c[o].classList.remove("is-valid"),c[o].classList.add("is-invalid"),c[o].closest(".input-container").getElementsByClassName("invalid-feedback")[0].innerHTML=d[0]}}else if([419,302].includes(t))window.location.reload();else if(200===t){var u=JSON.parse(e.target.response);"undefined"!=typeof dataLayer&&dataLayer.push({event:"sign_up",userId:u.user.id,userType:u.user.type}),window.location.replace(u.redirectUrl)}})),t.open("POST",l.getAttribute("action")),t.setRequestHeader("accept","application/json"),t.setRequestHeader("X-Requested-With","XMLHttpRequest"),t.send(r)}))}))}d.addEventListener("click",(function(e){d.checked?f.removeAttribute("style"):f.setAttribute("style","display: none;")}))}))})();